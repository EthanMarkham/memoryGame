(this["webpackJsonpmemory-game"]=this["webpackJsonpmemory-game"]||[]).push([[3],{109:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var n=a(18),r=a(24),c=a(0),s=a.n(c),i=a(3),u=a(9),l=a(23),o=a(1),d=s.a.lazy((function(){return a.e(4).then(a.bind(null,113))})),m=a(110).default,f=a(111).default,p=a(112).default,b=a(26).gameState;function g(e){e.dispatch;var t=Object(c.useReducer)(f,Object(n.a)({me:e.me},b)),a=Object(r.a)(t,2),s=a[0],g=a[1],O=p(),j=Object(c.useContext)(i.a);Object(c.useEffect)((function(){var e=!0;return e&&j.emit("GET_GAME"),j.on("GAME_INFO",(function(t){e&&g({type:"GAME_INFO",payload:t})})),j.on("GAME_TIMER",(function(t){e&&g({type:"GAME_TIMER",payload:t})})),function(){!function(e){j.emit("LEAVE_GAME_ROOM",s.game.id),j.off("GAME_INFO",(function(t){e&&g({type:"GAME_INFO",payload:t})})),j.off("GAME_TIMER",(function(t){e&&g({type:"GAME_TIMER",payload:t})}))}(e),e=!1}}),[]),Object(c.useEffect)((function(){return g({type:"SET_GRID",payload:O})}),[O,s.game.squares.length]);var E={toggleLeaveHelp:function(e){return g({type:"TOGGLE_LABELS",payload:{type:"LEAVE_INFO",value:e}})},toggleLabelHelp:function(e){return g({type:"TOGGLE_LABELS",payload:{type:"LABEL_INFO",value:e}})},toggleGameLabels:function(e){return g({type:"TOGGLE_LABELS",payload:{type:"GAME_INFO",value:e}})},handleQuit:function(e){return"GAME_OVER"!==s.game.status?j.emit("QUIT_GAME"):j.emit("GET_STATUS")},handleClick:function(e){return j.emit("GAME_CLICK",e)}},v=Object(u.d)(s.game.squares,(function(e){return e.id}),l.c),h=Object(u.c)(s.game.squares.length,s.game.squares.map((function(e){return{opacity:e.flipped?1:0,transform:"perspective(600px) rotateY(".concat(e.flipped?180:0,"deg)"),config:{mass:5,tension:500,friction:80}}})));return Object(o.jsxs)("div",{className:"game",children:["GAME_OVER"!==s.game.status?Object(o.jsx)("div",{className:"game-board",style:{gridTemplateColumns:"repeat(".concat(s.gridSize[0],", minmax(20px, 1fr))"),gridTemplateRows:"repeat(".concat(s.gridSize[1],", minmax(20px, 1fr))")},children:s.game.squares.length>0&&v.map((function(e,t){var a=e.props,r=e.item,c=e.key;return Object(o.jsx)(u.a.div,{style:Object(n.a)({},a),className:"squareHolder",children:Object(o.jsxs)("button",{className:"square",onClick:function(){return E.handleClick(r.id)},disabled:!r.clickable,children:[s.labels.card&&Object(o.jsx)("label",{children:r.civ}),Object(o.jsx)(u.a.div,{className:"c back",style:{opacity:h[t].opacity.interpolate((function(e){return 1-e})),transform:h[t].transform}}),Object(o.jsx)(u.a.div,{className:"c front",style:{opacity:h[t].opacity,transform:h[t].transform.interpolate((function(e){return"".concat(e," rotateY(180deg)")})),backgroundImage:"url(http://localhost:5000/".concat(r.image,")")}})]})},c)}))}):Object(o.jsx)(m,{state:s,dispatch:g}),Object(o.jsx)(d,{game:s.game,me:e.me,actions:E,helpers:s.labels,moveTimer:s.moveTimer})]})}},110:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return r}));var n=a(1);function r(e){var t=e.state.game,a=t.message,r=t.round,c=t.users;t.id;return Object(n.jsxs)("div",{className:"gameover",children:[Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col",children:[Object(n.jsx)("span",{className:"message",children:a}),Object(n.jsxs)("span",{className:"round",children:[" Attempts: ",r]})]})}),Object(n.jsx)("div",{className:"leaderBoard",children:Object(n.jsx)("ol",{children:c.map((function(e){return Object(n.jsxs)("li",{children:[e.username," - ",e.matches," matches"]},e.username)}))})})]})}},111:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return c}));var n=a(18),r=a(25);function c(e,t){var a,c=Object(n.a)({},e);switch(t&&(a=t.payload),t.type){case"GAME_INFO":return c=function(e,t,a){var r=a.game;return(e=Object(n.a)(Object(n.a)({},e),{},{game:r})).game.squares=r.squares.map((function(a){var r="/cards/back.PNG"===a.image&&"ONGOING"===e.game.status&&e.game.users.find((function(e){return e.upNext})).username===e.me;return 0===t.game.squares.length&&e.game.squares.length>0?Object(n.a)(Object(n.a)({},a),{},{clickable:r,newSquare:!0}):Object(n.a)(Object(n.a)({},a),{},{clickable:r})})),e}(c,e,a),1===a.game.users.length&&(c.moveTimer.enabled=!1),c;case"GAME_TIMER":return c.moveTimer={time:parseInt(a),enabled:!0},c;case"TOGGLE_LABELS":return"GAME_INFO"===a.type?c.labels.card=void 0!==a.value?a.value:!c.labels.leaveInfo:"LEAVE_INFO"===a.type?c.labels.leaveInfo=void 0!==a.value?a.value:!c.labels.leaveInfo:"LABEL_INFO"===a.type&&(c.labels.labelInfo=void 0!==a.value?a.value:!c.labels.labelInfo),c;case"SET_GRID":var s=Object(r.b)(c.game.squares.length,a);return s?(s[0]===c.gridSize[0]&&s[1]===c.gridSize[1]||(c.gridSize=s),c):c;default:return c}}},112:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a(0);t.default=function(){var e=Object(r.useState)({width:0,height:0}),t=Object(n.a)(e,2),a=t[0],c=t[1];return Object(r.useLayoutEffect)((function(){function e(){c({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),a}}}]);
//# sourceMappingURL=3.12d5d44a.chunk.js.map