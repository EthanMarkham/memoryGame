(this["webpackJsonpmemory-game"]=this["webpackJsonpmemory-game"]||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var r=n(1);t.default=function(e){var t=e.auth,n=e.dispatch,a=Object(r.jsx)("div",{className:"btn item",children:Object(r.jsx)("div",{className:"logoutBtn btn",onClick:function(){n({type:"LOGOUT"})},children:"Logout"})});return Object(r.jsxs)("nav",{children:[Object(r.jsx)("h1",{children:" AOE2 MEMORY "}),Object(r.jsx)("div",{className:"navItems",children:t.isAuth?a:" "})]})}},106:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(42),c=function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,114)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))},i=(n(48),n(49),n(1)),u=n(51).default;Object(o.render)(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(u,{})}),document.getElementById("root")),c()},23:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var r=n(9),a={from:{opacity:0},enter:{opacity:1},leave:{opacity:0},trail:20},o={from:{opacity:0},enter:{opacity:1},leave:{opacity:0}},c={from:{opacity:1,transform:"translate(-100%)"},enter:{opacity:1,transform:"translate(0);"},leave:{opacity:1,transform:"translate(100%)"},config:r.b.default}},25:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c}));var r=function(e,t){if(0!==t.height&&0!==t.width){for(var n=t.width/t.height,r=a(e).map((function(e){return{factor:e,dividend:e[0]/e[1]}})),o={dividend:e,factor:[e,1]},c=0;c<r.length;c++)Math.abs(o.dividend-n)>Math.abs(r[c].dividend-n)&&(o=r[c]);return o.factor}},a=function(e){if("number"===typeof e){for(var t=[],n=0;n<=e;n++)e%n===0&&t.push([n,e/n]);return t}},o=function(){return new Promise((function(e,t){var n=localStorage.getItem("jwt");"undefined"!==n&&n?fetch("/api/users/me/".concat(n)).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){return t(e)})):e({error:!0})}))},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"login",n="login"===t?"/api/users/login":"/api/users/register";return new Promise((function(t,r){fetch(n,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.error?r(e.message):t(e)}))}))}},26:function(e,t,n){"use strict";n.r(t),n.d(t,"initialState",(function(){return r})),n.d(t,"gameState",(function(){return a})),n.d(t,"preGameState",(function(){return o}));var r={auth:{username:"Guest",token:localStorage.getItem("jwt"),isAuth:!1},pageIndex:0,error:{show:!1,message:""}},a={gridSize:[0,0],game:{id:null,status:"WAITING",squares:[],round:0,message:"",users:[],listening:!1},moveTimer:{time:45,enabled:!1},labels:{card:!0,leaveInfo:!1,labelInfo:!1}},o={gameList:{games:[]},newGame:{gameName:"",playerCount:1,cardCount:48},action:0}},3:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return u}));var r=n(43),a=n.n(r),o=n(0),c=n.n(o),i=a.a.connect("/",{reconnectionDelayMax:1e4}),u=c.a.createContext()},49:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var r=n(24),a=n(0),o=n.n(a),c=n(9),i=n(25),u=n(26),s=n(23),f=n(3),l=n(1),d=n(83).default,h=n(84).default,m=[function(){return null},o.a.lazy((function(){return n.e(5).then(n.bind(null,107))})),o.a.lazy((function(){return n.e(6).then(n.bind(null,108))})),o.a.lazy((function(){return n.e(3).then(n.bind(null,109))}))],b=n(105).default;function g(){var e=Object(a.useReducer)(d,u.initialState),t=Object(r.a)(e,2),n=t[0],o=t[1];Object(a.useEffect)((function(){return Object(i.a)().then((function(e){return e.error?o({type:"SWITCH_PAGE",payload:1}):o({type:"LOGIN",payload:e})})),f.b.on("ERROR",(function(e){return o({type:"ERROR",payload:e})})),function(){return f.b.off("ERROR")}}),[]),Object(a.useEffect)((function(){return n.auth.isAuth?(f.b.emit("LOGIN",localStorage.getItem("jwt")),f.b.on("LOGIN_SUCCESS",(function(){return f.b.emit("GET_STATUS")})),f.b.on("USER_STATUS",(function(e){return o({type:"STATUS",payload:e})}))):f.b.emit("LOGOUT"),function(){f.b.off("USER_STATUS",(function(e){return o({type:"STATUS",payload:e})})),f.b.off("LOGIN_SUCCESS",(function(){return f.b.emit("GET_STATUS")}))}}),[n.auth]),Object(a.useEffect)((function(){n.error.show&&setTimeout((function(){return o({type:"HIDE_ERROR"})}),2e3)}),[n.error.show]);var g=Object(c.d)(n.pageIndex,(function(e){return e}),s.b),p=Object(c.d)(n.error.show,null,s.a);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(b,{auth:n.auth,dispatch:o}),Object(l.jsx)(a.Suspense,{fallback:Object(l.jsx)(h,{className:"loader",type:"Rings",color:"#00BFFF",height:80,width:80}),children:Object(l.jsxs)(f.a.Provider,{value:f.b,children:[p.map((function(e){var t=e.item,r=e.props,a=e.key;return t?Object(l.jsxs)(c.a.div,{style:r,className:"errorHolder",children:[Object(l.jsx)("b",{children:"Error!"}),"  ",Object(l.jsx)("span",{children:n.error.message})]},a):null})),Object(l.jsx)("div",{className:"page-container",children:g.map((function(e){var t=e.item,r=e.props,a=e.key,i=m[t];return Object(l.jsx)(c.a.div,{className:"animatedDiv",style:r,children:Object(l.jsx)(i,{dispatch:o,me:n.auth.username})},a)}))})]})})]})}},83:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var r=n(18);function a(e,t){var n,a=Object(r.a)({},e);switch(t&&(n=t.payload),t.type){case"LOGIN":return n.error?(localStorage.setItem("jwt",""),a.error.message=n.message,a.error.show=!0,a.pageIndex=1):(localStorage.setItem("jwt",n.token),a.auth=Object(r.a)(Object(r.a)({},n),{},{isAuth:!0})),a;case"LOGOUT":return localStorage.clear(),a.auth={username:"Guest",token:"",isAuth:!1},a.pageIndex=1,a;case"STATUS":return n.game?a.pageIndex=3:a.pageIndex=2,a;case"SWITCH_PAGE":return a.pageIndex=n,a;case"ERROR":return a.error.message=n,a.error.show=!0,"User not in game"===n?(a.error.message="You were removed from game",a.error.show=!0,a.pageIndex=2,a):a;case"HIDE_ERROR":return a.error.show=!1,a;default:return a}}}},[[106,1,2]]]);
//# sourceMappingURL=main.a33bb4bd.chunk.js.map