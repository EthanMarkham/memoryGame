{"version":3,"sources":["components/nav.js","reportWebVitals.js","index.jsx","helpers/transitions.js","helpers/helpers.js","helpers/initialState.js","context/socket.js","app.jsx","reducers/root.js"],"names":["Nav","props","auth","dispatch","logOut","className","onClick","type","isAuth","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","App","require","default","render","StrictMode","document","getElementById","squareAnimations","from","opacity","enter","leave","trail","errorTransition","pageTransition","transform","config","getGridLayout","itemCount","windowSize","height","width","windowDivedend","factorDividends","getFactors","map","f","factor","dividend","output","i","length","Math","abs","num","factors","push","checkAuth","Promise","resolve","reject","token","localStorage","getItem","fetch","response","json","data","catch","err","error","login","action","url","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","JSON","stringify","message","initialState","username","pageIndex","show","gameState","gridSize","game","id","status","squares","round","users","listening","moveTimer","time","enabled","labels","card","leaveInfo","labelInfo","preGameState","gameList","games","newGame","gameName","playerCount","cardCount","socket","socketio","connect","reconnectionDelayMax","SocketContext","React","createContext","reducer","Loader","pages","lazy","useReducer","state","useEffect","payload","on","off","emit","setTimeout","pageAnimations","useTransition","p","errorTrans","fallback","color","Provider","value","item","key","div","style","Page","me","copy","setItem","clear"],"mappings":"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","file":"static/js/main.a33bb4bd.chunk.js","sourcesContent":["function Nav(props) {\r\n  const { auth, dispatch } = props\r\n  \r\n  const Logout = () => {\r\n    dispatch({type: \"LOGOUT\"})\r\n  }\r\n\r\n  const logOut = <div className=\"btn item\"><div className=\"logoutBtn btn\" onClick={Logout}>Logout</div>\r\n  </div>\r\n  return (\r\n    <nav>\r\n      <h1> AOE2 MEMORY </h1>\r\n      <div className=\"navItems\">\r\n        {auth.isAuth ? logOut : ' '}\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n\r\nexport default Nav","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport { render } from 'react-dom'\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './styles/index.scss';\r\n\r\nconst App = require('./app').default\r\n\r\nrender(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","import { config } from 'react-spring'\r\n\r\nexport const squareAnimations = {\r\n    from: {opacity: 0},\r\n    enter: {opacity: 1},\r\n    leave:({\r\n        opacity: 0,\r\n    }),\r\n    trail: 20\r\n}\r\n\r\nexport const errorTransition = {\r\n    from: { opacity: 0 },\r\n    enter: { opacity: 1 },\r\n    leave: {opacity: 0}\r\n}\r\n\r\nexport const timerTransition = {\r\n    from: { opacity: 0 },\r\n    enter: {opacity: 1},\r\n    leave: {opacity: 0}\r\n\r\n}\r\nexport const pageTransition = {\r\n    from: { opacity: 1, transform: 'translate(-100%)' }, //rotateY(90deg)\r\n    enter: { opacity: 1, transform: 'translate(0);'}, //rotateY(0deg) \r\n    leave: { opacity: 1, transform: 'translate(100%)'}, //rotateY(90deg)\r\n    config: config.default\r\n}","\r\nexport const getGridLayout = (itemCount, windowSize) => {\r\n  if (windowSize.height === 0 || windowSize.width === 0) return\r\n  let windowDivedend = (windowSize.width / windowSize.height)\r\n  let factorDividends = getFactors(itemCount).map(f => ({\r\n    factor: f,\r\n    dividend: (f[0] / f[1])\r\n  }))\r\n  let output = { dividend: itemCount, factor: [itemCount, 1] } //need to better use reducer \r\n  for (let i = 0; i < factorDividends.length; i++) {\r\n    if (Math.abs(output.dividend - windowDivedend) > Math.abs(factorDividends[i].dividend - windowDivedend)) output = factorDividends[i]\r\n  }\r\n  return output.factor\r\n}\r\n\r\nexport const getFactors = (num) => {\r\n  if (typeof num !== \"number\") return\r\n  let factors = []\r\n  for (let i = 0; i <= num; i++) {\r\n    if (num % i === 0) {\r\n      factors.push([i, num / i])\r\n    }\r\n  }\r\n  return factors\r\n}\r\nexport const checkAuth = () => {\r\n  return new Promise((resolve, reject) => {\r\n    let token = localStorage.getItem('jwt')\r\n    if (token !== \"undefined\" && token) {\r\n      fetch(`/api/users/me/${token}`)\r\n        .then(response => response.json())\r\n        .then(data => resolve(data))\r\n        .catch(err => reject(err))\r\n    }\r\n    else resolve({error: true})\r\n  })\r\n}\r\nexport const login = (data, action=\"login\") => {\r\n  let url = (action === 'login') ? \"/api/users/login\" : \"/api/users/register\"\r\n  return new Promise((resolve, reject) => {\r\n    fetch(url, {\r\n      method: 'POST', // *GET, POST, PUT, DELETE, etc.\r\n      mode: 'cors', // no-cors, *cors, same-origin\r\n      cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n      credentials: 'same-origin', // include, *same-origin, omit\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n        // 'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      redirect: 'follow', // manual, *follow, error\r\n      referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\r\n      body: JSON.stringify(data) // body data type must match \"Content-Type\" header\r\n    })\r\n      .then(response => response.json())\r\n      .then((data) => {\r\n        if (data.error) {\r\n          reject(data.message)\r\n          return\r\n        } else {\r\n          resolve(data) //set our jwt local storage in auth hook\r\n        }\r\n      })\r\n  })\r\n}\r\nexport function getContrastYIQ(hexcolor) {\r\n  var r = parseInt(hexcolor.substr(0, 2), 16);\r\n  var g = parseInt(hexcolor.substr(2, 2), 16);\r\n  var b = parseInt(hexcolor.substr(4, 2), 16);\r\n  var yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;\r\n  return (yiq >= 128) ? 'black' : 'white';\r\n}\r\n\r\n","\r\nexport const initialState = {\r\n    auth: { \r\n        username: 'Guest', \r\n        token: localStorage.getItem('jwt'), \r\n        isAuth: false \r\n    },\r\n    pageIndex: 0, \r\n    error: {\r\n        show: false,\r\n        message: '',\r\n    },\r\n}\r\n\r\nexport const gameState = {\r\n    gridSize: [0, 0],\r\n    game: {\r\n        id: null,\r\n        status: \"WAITING\",\r\n        squares: [],\r\n        round: 0,\r\n        message: '',\r\n        users: [],\r\n        listening: false\r\n    },\r\n    moveTimer: {\r\n        time: 45,\r\n        enabled: false\r\n    },\r\n    labels: {\r\n        card: true,\r\n        leaveInfo: false,\r\n        labelInfo: false\r\n    }\r\n}\r\nexport const preGameState = {\r\n    gameList: { \r\n        games: [], \r\n    },\r\n    newGame: {\r\n        gameName: \"\",\r\n        playerCount: 1,\r\n        cardCount: 48\r\n    },\r\n    action: 0, //0 joining ---- OR ---- 1 creating\r\n}","import socketio from \"socket.io-client\";\r\nimport React from 'react';\r\nexport const socket = socketio.connect(\"/\", { reconnectionDelayMax: 10000});\r\nexport const SocketContext = React.createContext();","import React, { Suspense, useEffect, useReducer } from \"react\";\r\nimport { useTransition, animated as a } from 'react-spring'\r\nimport { checkAuth } from './helpers/helpers';\r\nimport { initialState } from './helpers/initialState';\r\nimport { errorTransition, pageTransition } from './helpers/transitions';\r\nimport { SocketContext, socket } from './context/socket';\r\n\r\nconst reducer = require('./reducers/root').default\r\nconst Loader = require(\"react-loader-spinner\").default\r\n\r\nconst pages = [\r\n  () => null,\r\n  React.lazy(() => import('./components/login/login')), // 1 - Login\r\n  React.lazy(() => import('./components/pre_game/pre_game')), // 2 - Pre Game\r\n  React.lazy(() => import('./components/game/game')) //3 - Game\r\n]\r\nconst Nav = require('./components/nav').default\r\n\r\nexport default function App() {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  let errorTimeout = null;\r\n\r\n  useEffect(() => {\r\n    checkAuth()\r\n      .then(data => (!data.error)\r\n        ? dispatch({ type: \"LOGIN\", payload: data })\r\n        : dispatch({ type: \"SWITCH_PAGE\", payload: 1 })) //init check auth, dispatch response which is handled in reducer\r\n\r\n    socket.on(\"ERROR\", data => dispatch({ type: \"ERROR\", payload: data }))\r\n    return (() => socket.off(\"ERROR\"))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    //when user signs in tell our socket to sign in which triggers it also asking for game info. \r\n    if (state.auth.isAuth) {\r\n      socket.emit(\"LOGIN\", localStorage.getItem('jwt')) //init socket session\r\n      socket.on(\"LOGIN_SUCCESS\", () => socket.emit(\"GET_STATUS\"))\r\n      socket.on(\"USER_STATUS\", status => dispatch({ type: \"STATUS\", payload: status })) //backend can control where user is by emmitting user status\r\n    }\r\n    else {\r\n      socket.emit(\"LOGOUT\") //tell socket to clear session, mb clean this up with logging out state?\r\n    }\r\n    return () => {\r\n      socket.off(\"USER_STATUS\", status => dispatch({ type: \"STATUS\", payload: status }))\r\n      socket.off(\"LOGIN_SUCCESS\", () => socket.emit(\"GET_STATUS\"))\r\n    }\r\n  }, [state.auth])\r\n\r\n  useEffect(() => {\r\n    if (state.error.show) {\r\n      errorTimeout = setTimeout(() => dispatch({ type: \"HIDE_ERROR\" }), 2000);\r\n    }\r\n  }, [state.error.show])\r\n\r\n  const pageAnimations = useTransition(state.pageIndex, p => p, pageTransition);\r\n  const errorTrans = useTransition(state.error.show, null, errorTransition);\r\n  //const squareSprings = useSprings(state.game.squares.length, items.map(item => ({ opacity: item.opacity })))\r\n\r\n  return (<>\r\n    <Nav auth={state.auth} dispatch={dispatch} />\r\n    <Suspense fallback={<Loader className=\"loader\" type=\"Rings\" color=\"#00BFFF\" height={80} width={80} />}>\r\n      <SocketContext.Provider value={socket}>\r\n        {errorTrans.map(({ item, props, key }) =>\r\n          item\r\n            ? <a.div style={props} key={key} className=\"errorHolder\">\r\n              <b>Error!</b>  <span>{state.error.message}</span>\r\n            </a.div>\r\n            : null)\r\n        }\r\n        <div className=\"page-container\">\r\n          {pageAnimations.map(({ item, props, key }) => {\r\n            const Page = pages[item]\r\n            return (\r\n              <a.div className='animatedDiv' key={key} style={props}>\r\n                <Page\r\n                  dispatch={dispatch}\r\n                  me={state.auth.username}\r\n                />\r\n              </a.div>)\r\n          })}\r\n        </div>\r\n      </SocketContext.Provider>\r\n    </Suspense>\r\n  </>)\r\n}\r\n\r\n","//0 loader, 1 login, 2 pregame, 3 GAme\r\nexport default function reducer(state, action) {\r\n    let copy = { ...state }, data\r\n    if (action) data = action.payload\r\n    switch (action.type) {\r\n        case \"LOGIN\":\r\n            if (!data.error) {\r\n                localStorage.setItem('jwt', data.token)\r\n                copy.auth = { ...data, isAuth: true }  //hook catches auth change and emits listens for socket status\r\n            }\r\n            else {\r\n                localStorage.setItem('jwt', '')\r\n                copy.error.message = data.message\r\n                copy.error.show = true;\r\n                copy.pageIndex = 1\r\n            }\r\n            return copy\r\n        case \"LOGOUT\":\r\n            localStorage.clear()\r\n            copy.auth = { username: 'Guest', token: '', isAuth: false }\r\n            copy.pageIndex = 1\r\n            return copy\r\n        case \"STATUS\":\r\n            if (data.game) copy.pageIndex = 3;\r\n            else copy.pageIndex = 2;\r\n            return copy\r\n        case \"SWITCH_PAGE\":\r\n            copy.pageIndex = data;\r\n            return copy\r\n        case \"ERROR\":\r\n            copy.error.message = data\r\n            copy.error.show = true\r\n            if (data === \"User not in game\") { //this is to force them out of game if admin kicks them. probably a better way\r\n                copy.error.message = \"You were removed from game\"\r\n                copy.error.show = true\r\n                copy.pageIndex = 2;\r\n                return copy\r\n            }\r\n            return copy\r\n        case \"HIDE_ERROR\":\r\n            copy.error.show = false;\r\n            return copy;\r\n        default:\r\n            return copy;\r\n    }\r\n}\r\n"],"sourceRoot":""}